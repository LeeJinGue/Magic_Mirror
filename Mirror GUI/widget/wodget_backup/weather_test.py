from datetime import datetime, timedelta
from pickletools import long1
from bs4 import BeautifulSoup
from pprint import pprint
import time
import sys
import requests
import json


import re


dj = {'lat': 37.2769, 'lon': 127.0022, 'timezone': 'Asia/Seoul', 'timezone_offset': 32400, 'current': {'dt': 1651471182, 'sunrise': 1651437395, 'sunset': 1651486878, 'temp': 291.47, 'feels_like': 289.88, 'pressure': 1012, 'humidity': 20, 'dew_point': 268.71, 'uvi': 4.1, 'clouds': 1, 'visibility': 10000, 'wind_speed': 4.68, 'wind_deg': 273, 'wind_gust': 4.88, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}]}, 'hourly': [{'dt': 1651467600, 'temp': 291.24, 'feels_like': 289.63, 'pressure': 1012, 'humidity': 20, 'dew_point': 268.54, 'uvi': 5.51, 'clouds': 1, 'visibility': 10000, 'wind_speed': 4.94, 'wind_deg': 277, 'wind_gust': 5.21, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651471200, 'temp': 291.47, 'feels_like': 289.88, 'pressure': 1012, 'humidity': 20, 'dew_point': 268.71, 'uvi': 4.1, 'clouds': 1, 'visibility': 10000, 'wind_speed': 4.68, 'wind_deg': 273, 'wind_gust': 4.88, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651474800, 'temp': 291.15, 'feels_like': 289.55, 'pressure': 1012, 'humidity': 21, 'dew_point': 269.05, 'uvi': 2.48, 'clouds': 1, 'visibility': 10000, 'wind_speed': 5.07, 'wind_deg': 273, 'wind_gust': 5.07, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651478400, 'temp': 290.55, 'feels_like': 288.97, 'pressure': 1012, 'humidity': 24, 'dew_point': 270.18, 'uvi': 1.2, 'clouds': 1, 'visibility': 10000, 'wind_speed': 4.98, 'wind_deg': 273, 'wind_gust': 5.1, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651482000, 'temp': 289.59, 'feels_like': 288.02, 'pressure': 1013, 'humidity': 28, 'dew_point': 271.29, 'uvi': 0.4, 'clouds': 0, 'visibility': 10000, 'wind_speed': 4.5, 'wind_deg': 270, 'wind_gust': 5.69, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651485600, 'temp': 288.32, 'feels_like': 286.81, 'pressure': 1013, 'humidity': 35, 'dew_point': 273, 'uvi': 0, 'clouds': 0, 'visibility': 10000, 'wind_speed': 3.52, 'wind_deg': 269, 'wind_gust': 5.78, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651489200, 'temp': 286.93, 'feels_like': 285.51, 'pressure': 1014, 'humidity': 44, 'dew_point': 274.44, 'uvi': 0, 'clouds': 0, 'visibility': 10000, 'wind_speed': 2.07, 'wind_deg': 263, 'wind_gust': 3.91, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1651492800, 'temp': 286.62, 'feels_like': 285.25, 'pressure': 1015, 'humidity': 47, 'dew_point': 275.27, 'uvi': 0, 'clouds': 0, 'visibility': 10000, 'wind_speed': 1.27, 'wind_deg': 257, 'wind_gust': 2.62, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1651496400, 'temp': 286.4, 'feels_like': 285.03, 'pressure': 1016, 'humidity': 48, 'dew_point': 275.36, 'uvi': 0, 'clouds': 0, 'visibility': 10000, 'wind_speed': 1.12, 'wind_deg': 260, 'wind_gust': 2.64, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1651500000, 'temp': 286.08, 'feels_like': 284.68, 'pressure': 1016, 'humidity': 48, 'dew_point': 274.98, 'uvi': 0, 'clouds': 0, 'visibility': 10000, 'wind_speed': 0.6, 'wind_deg': 244, 'wind_gust': 1.37, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1651503600, 'temp': 285.5, 'feels_like': 284.1, 'pressure': 1017, 'humidity': 50, 'dew_point': 275.21, 'uvi': 0, 'clouds': 0, 'visibility': 10000, 'wind_speed': 1.13, 'wind_deg': 152, 'wind_gust': 1.59, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1651507200, 'temp': 284.57, 'feels_like': 283.23, 'pressure': 1017, 'humidity': 56, 'dew_point': 275.97, 'uvi': 0, 'clouds': 0, 'visibility': 10000, 'wind_speed': 2.3, 'wind_deg': 154, 'wind_gust': 3.58, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1651510800, 'temp': 283.7, 'feels_like': 282.38, 'pressure': 1018, 'humidity': 60, 'dew_point': 276.09, 'uvi': 0, 'clouds': 0, 'visibility': 10000, 'wind_speed': 2.28, 'wind_deg': 165, 'wind_gust': 3.83, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1651514400, 'temp': 283.23, 'feels_like': 281.94, 'pressure': 1018, 'humidity': 63, 'dew_point': 276.26, 'uvi': 0, 'clouds': 0, 'visibility': 10000, 'wind_speed': 1.95, 'wind_deg': 174, 'wind_gust': 3.31, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1651518000, 'temp': 282.87, 'feels_like': 282.22, 'pressure': 1018, 'humidity': 67, 'dew_point': 276.83, 'uvi': 0, 'clouds': 0, 'visibility': 10000, 'wind_speed': 1.77, 'wind_deg': 183, 'wind_gust': 2.94, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1651521600, 'temp': 282.52, 'feels_like': 281.98, 'pressure': 1018, 'humidity': 71, 'dew_point': 277.37, 'uvi': 0, 'clouds': 0, 'visibility': 10000, 'wind_speed': 1.6, 'wind_deg': 161, 'wind_gust': 2.31, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1651525200, 'temp': 282.34, 'feels_like': 281.66, 'pressure': 1019, 'humidity': 72, 'dew_point': 277.46, 'uvi': 0, 'clouds': 0, 'visibility': 10000, 'wind_speed': 1.71, 'wind_deg': 156, 'wind_gust': 2.65, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651528800, 'temp': 283.07, 'feels_like': 282.33, 'pressure': 1020, 'humidity': 66, 'dew_point': 276.95, 'uvi': 0.39, 'clouds': 0, 'visibility': 10000, 'wind_speed': 1.9, 'wind_deg': 171, 'wind_gust': 2.68, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651532400, 'temp': 284.72, 'feels_like': 283.37, 'pressure': 1020, 'humidity': 55, 'dew_point': 275.91, 'uvi': 1.25, 'clouds': 0, 'visibility': 10000, 'wind_speed': 2.22, 'wind_deg': 188, 'wind_gust': 3.15, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651536000, 'temp': 286.7, 'feels_like': 285.23, 'pressure': 1020, 'humidity': 43, 'dew_point': 274.24, 'uvi': 2.68, 'clouds': 0, 'visibility': 10000, 'wind_speed': 2.7, 'wind_deg': 209, 'wind_gust': 4.08, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651539600, 'temp': 288.5, 'feels_like': 286.95, 'pressure': 1020, 'humidity': 33, 'dew_point': 272.34, 'uvi': 4.47, 'clouds': 2, 'visibility': 10000, 'wind_speed': 3.17, 'wind_deg': 231, 'wind_gust': 4.77, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651543200, 'temp': 290.04, 'feels_like': 288.49, 'pressure': 1020, 'humidity': 27, 'dew_point': 271, 'uvi': 6.09, 'clouds': 2, 'visibility': 10000, 'wind_speed': 3.86, 'wind_deg': 236, 'wind_gust': 5.27, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651546800, 'temp': 291.21, 'feels_like': 289.72, 'pressure': 1020, 'humidity': 25, 'dew_point': 270.74, 'uvi': 7.07, 'clouds': 4, 'visibility': 10000, 'wind_speed': 4.42, 'wind_deg': 248, 'wind_gust': 5.63, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651550400, 'temp': 291.81, 'feels_like': 290.36, 'pressure': 1019, 'humidity': 24, 'dew_point': 270.81, 'uvi': 7.13, 'clouds': 4, 'visibility': 10000, 'wind_speed': 5.03, 'wind_deg': 252, 'wind_gust': 6.31, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651554000, 'temp': 292.03, 'feels_like': 290.6, 'pressure': 1019, 'humidity': 24, 'dew_point': 270.79, 'uvi': 6.21, 'clouds': 4, 'visibility': 10000, 'wind_speed': 5.23, 'wind_deg': 254, 'wind_gust': 6.83, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651557600, 'temp': 292.04, 'feels_like': 290.59, 'pressure': 1019, 'humidity': 23, 'dew_point': 270.67, 'uvi': 4.61, 'clouds': 3, 'visibility': 10000, 'wind_speed': 5.15, 'wind_deg': 252, 'wind_gust': 7.04, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651561200, 'temp': 291.83, 'feels_like': 290.41, 'pressure': 1018, 'humidity': 25, 'dew_point': 271.15, 'uvi': 2.84, 'clouds': 6, 'visibility': 10000, 'wind_speed': 5.33, 'wind_deg': 247, 'wind_gust': 7.51, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651564800, 'temp': 291.21, 'feels_like': 289.75, 'pressure': 1018, 'humidity': 26, 'dew_point': 271.2, 'uvi': 1.37, 'clouds': 26, 'visibility': 10000, 'wind_speed': 5.12, 'wind_deg': 241, 'wind_gust': 7.69, 'weather': [{'id': 802, 'main': 'Clouds', 'description': 'scattered clouds', 'icon': '03d'}], 'pop': 0}, {'dt': 1651568400, 'temp': 290.32, 'feels_like': 288.8, 'pressure': 1018, 'humidity': 27, 'dew_point': 271.27, 'uvi': 0.45, 'clouds': 50, 'visibility': 10000, 'wind_speed': 4.68, 'wind_deg': 236, 'wind_gust': 7.64, 'weather': [{'id': 802, 'main': 'Clouds', 'description': 'scattered clouds', 'icon': '03d'}], 'pop': 0}, {'dt': 1651572000, 'temp': 289.06, 'feels_like': 287.49, 'pressure': 1019, 'humidity': 30, 'dew_point': 271.65, 'uvi': 0, 'clouds': 44, 'visibility': 10000, 'wind_speed': 3.94, 'wind_deg': 232, 'wind_gust': 7.74, 'weather': [{'id': 802, 'main': 'Clouds', 'description': 'scattered clouds', 'icon': '03d'}], 'pop': 0}, {'dt': 1651575600, 'temp': 288.09, 'feels_like': 286.5, 'pressure': 1019, 'humidity': 33, 'dew_point': 271.79, 'uvi': 0, 'clouds': 37, 'visibility': 10000, 'wind_speed': 2.94, 'wind_deg': 225, 'wind_gust': 7.69, 'weather': [{'id': 802, 'main': 'Clouds', 'description': 'scattered clouds', 'icon': '03n'}], 'pop': 0}, {'dt': 1651579200, 'temp': 287.36, 'feels_like': 285.75, 'pressure': 1020, 'humidity': 35, 'dew_point': 271.9, 'uvi': 0, 'clouds': 32, 'visibility': 10000, 'wind_speed': 2.57, 'wind_deg': 214, 'wind_gust': 7.26, 'weather': [{'id': 802, 'main': 'Clouds', 'description': 'scattered clouds', 'icon': '03n'}], 'pop': 0}, {'dt': 1651582800, 'temp': 286.87, 'feels_like': 285.26, 'pressure': 1021, 'humidity': 37, 'dew_point': 272.24, 'uvi': 0, 'clouds': 1, 'visibility': 10000, 'wind_speed': 2.13, 'wind_deg': 195, 'wind_gust': 7.33, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1651586400, 'temp': 286.47, 'feels_like': 284.82, 'pressure': 1021, 'humidity': 37, 'dew_point': 272.26, 'uvi': 0, 'clouds': 0, 'visibility': 10000, 'wind_speed': 1.98, 'wind_deg': 178, 'wind_gust': 7.37, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1651590000, 'temp': 286.17, 'feels_like': 284.52, 'pressure': 1020, 'humidity': 38, 'dew_point': 272.17, 'uvi': 0, 'clouds': 0, 'visibility': 10000, 'wind_speed': 1.91, 'wind_deg': 172, 'wind_gust': 7.22, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1651593600, 'temp': 285.79, 'feels_like': 284.13, 'pressure': 1020, 'humidity': 39, 'dew_point': 272.07, 'uvi': 0, 'clouds': 0, 'visibility': 10000, 'wind_speed': 1.77, 'wind_deg': 156, 'wind_gust': 5.67, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1651597200, 'temp': 285.46, 'feels_like': 283.79, 'pressure': 1019, 'humidity': 40, 'dew_point': 272.08, 'uvi': 0, 'clouds': 0, 'visibility': 10000, 'wind_speed': 1.76, 'wind_deg': 147, 'wind_gust': 4.7, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1651600800, 'temp': 285.12, 'feels_like': 283.42, 'pressure': 1019, 'humidity': 40, 'dew_point': 271.95, 'uvi': 0, 'clouds': 0, 'visibility': 10000, 'wind_speed': 1.59, 'wind_deg': 132, 'wind_gust': 3.29, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1651604400, 'temp': 284.91, 'feels_like': 283.21, 'pressure': 1019, 'humidity': 41, 'dew_point': 271.89, 'uvi': 0, 'clouds': 0, 'visibility': 10000, 'wind_speed': 1.33, 'wind_deg': 111, 'wind_gust': 1.99, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1651608000, 'temp': 284.76, 'feels_like': 283.05, 'pressure': 1020, 'humidity': 41, 'dew_point': 271.66, 'uvi': 0, 'clouds': 0, 'visibility': 10000, 'wind_speed': 1.32, 'wind_deg': 122, 'wind_gust': 1.63, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1651611600, 'temp': 284.67, 'feels_like': 282.95, 'pressure': 1020, 'humidity': 41, 'dew_point': 271.62, 'uvi': 0, 'clouds': 0, 'visibility': 10000, 'wind_speed': 1.54, 'wind_deg': 130, 'wind_gust': 2.12, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651615200, 'temp': 285.76, 'feels_like': 284.07, 'pressure': 1021, 'humidity': 38, 'dew_point': 271.55, 'uvi': 0.41, 'clouds': 0, 'visibility': 10000, 'wind_speed': 1.65, 'wind_deg': 135, 'wind_gust': 3.42, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651618800, 'temp': 287.78, 'feels_like': 286.16, 'pressure': 1021, 'humidity': 33, 'dew_point': 271.36, 'uvi': 1.3, 'clouds': 0, 'visibility': 10000, 'wind_speed': 2.18, 'wind_deg': 152, 'wind_gust': 4.37, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651622400, 'temp': 289.85, 'feels_like': 288.33, 'pressure': 1021, 'humidity': 29, 'dew_point': 271.68, 'uvi': 2.8, 'clouds': 0, 'visibility': 10000, 'wind_speed': 2.6, 'wind_deg': 175, 'wind_gust': 4.76, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651626000, 'temp': 291.78, 'feels_like': 290.43, 'pressure': 1021, 'humidity': 28, 'dew_point': 272.56, 'uvi': 4.66, 'clouds': 0, 'visibility': 10000, 'wind_speed': 2.81, 'wind_deg': 194, 'wind_gust': 5.07, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651629600, 'temp': 293.62, 'feels_like': 292.4, 'pressure': 1021, 'humidity': 26, 'dew_point': 273.56, 'uvi': 6.35, 'clouds': 0, 'visibility': 10000, 'wind_speed': 3.2, 'wind_deg': 214, 'wind_gust': 5.24, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651633200, 'temp': 295.31, 'feels_like': 294.21, 'pressure': 1020, 'humidity': 24, 'dew_point': 273.55, 'uvi': 7.36, 'clouds': 0, 'visibility': 10000, 'wind_speed': 3.79, 'wind_deg': 229, 'wind_gust': 5.77, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1651636800, 'temp': 296.18, 'feels_like': 295.11, 'pressure': 1020, 'humidity': 22, 'dew_point': 273.2, 'uvi': 7.4, 'clouds': 0, 'visibility': 10000, 'wind_speed': 4.38, 'wind_deg': 238, 'wind_gust': 5.88, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}]}
k2c = lambda k: k - 273.15 #섭씨 화씨 변환
count = 0
hour_weather_set = []
now = datetime.now()
now = now.hour
for hour in dj['hourly']:
    unixtime = hour['dt']
    hourly_time = datetime.fromtimestamp(int(unixtime))
    hourly_temp = hour['temp']
    if hourly_time.hour > now:
        hourly_weather = hour['weather'][0]['description']
        hourly_temp = k2c(hourly_temp)
        tmp = {'time':hourly_time.hour, 'temp':int(hourly_temp), 'weather':hourly_weather}
        hour_weather_set.insert(len(hour_weather_set),tmp)
        #print(tmp)
        #print(hourly_time.hour )
        #print(int(hourly_temp))
        #print(hourly_weather)
        count+=1
    if(count>=5):
        break

print(hour_weather_set)


    
    